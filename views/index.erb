<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Hangman Game</title>
  <link rel="stylesheet" href="/styles.css">
  <script src="/script.js" defer></script>
</head>
<body>
  <h1>ðŸŽ¯ Hangman Game</h1>

  <!-- Toggle Dark/Light Mode -->
  <button onclick="toggleMode()">ðŸŒ“ Toggle Light/Dark Mode</button>

  <!-- Game Info -->
  <h2>Level: <%= session[:level] || 1 %></h2>
  <p>Wrong guesses: <%= session[:wrong_guesses] %>/6</p>

  <!-- Hangman Drawing -->
  <%= hangman_ascii(session[:wrong_guesses]) %>

  <!-- Word Display -->
  <p>
    <% session[:word].chars.each do |c| %>
      <% if session[:guesses].include?(c) %>
        <%= c %>
      <% else %>
        _ 
      <% end %>
    <% end %>
  </p>

  <!-- Guess Form -->
  <% unless @game_won || @game_lost %>
    <form action="/guess" method="POST">
      <input type="text" name="letter" maxlength="1" required>
      <button type="submit">Guess</button>
    </form>
  <% end %>

  <!-- Hint Section -->
  <% unless @game_won || @game_lost %>
    <form action="/hint" method="POST">
      <button type="submit">ðŸ’¡ Hint</button>
    </form>
  <% end %>

  <!-- Display Hint if exists -->
  <p id="hint-text">
    <% if session[:hint] %>
      ðŸ’¡ Hint: <%= session[:hint] %>
    <% end %>
  </p>

  <!-- Sarcastic Remark -->
  <% if @sarcasm %>
    <p style="color: red;"><%= @sarcasm %></p>
  <% end %>

<audio id="win-sound">
  <source src="/applause.mp3" type="audio/mpeg">
  <source src="/applause.ogg" type="audio/ogg">
  Your browser does not support the audio element.
</audio>

  <!-- Result Messages -->
  <% if @game.won? %>
  <script>playWinSound();</script>
<% elsif @game.lost? %>
  <script>playLoseSound();</script>
<% end %>


  <!-- Restart Button -->
  <p><a href="/new">ðŸ”„ Restart</a></p>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Hangman Game</title>
  <link rel="stylesheet" href="/styles.css">
  <script src="/script.js" defer></script>
</head>
<body>
  <h1>ğŸ¯ Hangman Game</h1>
  
  <!-- Toggle Dark/Light Mode -->
  <button onclick="toggleMode()">ğŸŒ“ Toggle Light/Dark Mode</button>

  <!-- Game Info -->
  <h2>Level: <%= session[:level] || 1 %></h2>
  <p>Wrong guesses: <%= session[:wrong_guesses] %>/6</p>

  <!-- Hangman Drawing -->
  <pre><%= hangman_ascii(session[:wrong_guesses]) %></pre>

  <!-- Word Display -->
  <p>
    <% session[:word].chars.each do |c| %>
      <% if session[:guesses].include?(c) %>
        <%= c %>
      <% else %>
        _ 
      <% end %>
    <% end %>
  </p>

  <!-- Letter Guess Form -->
  <form action="/guess" method="POST">
    <input type="text" name="letter" maxlength="1" required>
    <button type="submit">Guess</button>
  </form>

  <!-- Hint Section -->
  <form action="/hint" method="post">
    <button type="submit">ğŸ’¡ Hint</button>
  </form>

  <!-- Hint Display with ID for testing -->
  <p id="hint-text">
    <% if session[:hint] %>
      ğŸ’¡ Hint: <%= session[:hint] %>
    <% end %>
  </p>

  <!-- Sarcastic Remark -->
  <% if @sarcasm %>
    <p style="color: red;"><%= @sarcasm %></p>
  <% end %>

  <!-- Win/Loss Messages -->
  <% if @game_won %>
    <p style="color: green; font-weight: bold;">ğŸ‰ You won! Level up! ğŸ‰</p>
    <audio id="applause" src="/applause.mp3" autoplay></audio>
  <% elsif @game_lost %>
    <p style="color: darkred; font-weight: bold;">ğŸ’€ You lost! The word was "<%= session[:word] %>"</p>
  <% end %>

  <!-- Restart Link -->
  <p><a href="/new">ğŸ”„ Restart</a></p>
</body>
</html>
